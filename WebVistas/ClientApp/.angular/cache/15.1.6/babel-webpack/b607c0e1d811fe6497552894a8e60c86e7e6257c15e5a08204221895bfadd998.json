{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction FetchDataComponent_option_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 6);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const person_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", person_r2.cedula);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(person_r2.nombre);\n  }\n}\nfunction FetchDataComponent_tr_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const venta_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(venta_r3.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(venta_r3.cedula);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(venta_r3.idSupermercado);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(venta_r3.metodoPago);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(venta_r3.tipoCambio);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(venta_r3.fechaOrden);\n  }\n}\nexport class FetchDataComponent {\n  constructor(http) {\n    this.http = http;\n    this.selectedPerson = 0;\n    this.persons = [];\n    this.ventas = [];\n    this.totalVentas = 0;\n    this.detalleVenta = [];\n  }\n  ngOnInit() {\n    // Obtener los datos de las personas desde una URL\n    this.http.get('https://localhost:5001/api/Personas/ObtenerPersonas').subscribe(data => {\n      this.persons = data;\n      this.loadVentas();\n    });\n  }\n  // Método para cargar las ventas al seleccionar una persona\n  loadVentas() {\n    this.totalVentas = 0;\n    // Obtener los datos de las ventas desde una URL utilizando this.selectedPerson como parámetro\n    this.http.get('https://localhost:5001/api/Ventas/ObtenerOrdenVenta/' + this.selectedPerson).subscribe(data => {\n      this.ventas = data;\n      // Obtener los detalles de venta para cada venta en this.ventas\n      const ventasIds = this.ventas.map(venta => venta.id);\n      console.log(ventasIds);\n      this.http.get('https://localhost:5001/api/Ventas/ObtenerDetallesOrdenVenta/' + ventasIds).subscribe(data => {\n        this.detalleVenta = data;\n        // Calcular el total de ventas\n        this.totalVentas = this.detalleVenta.reduce((total, venta) => total + venta.precioTotalImpuestos, 0);\n      });\n    });\n  }\n}\nFetchDataComponent.ɵfac = function FetchDataComponent_Factory(t) {\n  return new (t || FetchDataComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n};\nFetchDataComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FetchDataComponent,\n  selectors: [[\"app-fetch-data\"]],\n  decls: 26,\n  vars: 4,\n  consts: [[2, \"text-align\", \"center\"], [\"placeholder\", \"Seleccionar persona\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"aria-labelledby\", \"tableLabel\", 1, \"table\", \"table-striped\"], [4, \"ngFor\", \"ngForOf\"], [2, \"text-align\", \"left\"], [3, \"value\"]],\n  template: function FetchDataComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\", 0);\n      i0.ɵɵtext(1, \"TOTAL DE VENTAS POR CLIENTE\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\", 0)(3, \"select\", 1);\n      i0.ɵɵlistener(\"ngModelChange\", function FetchDataComponent_Template_select_ngModelChange_3_listener($event) {\n        return ctx.selectedPerson = $event;\n      })(\"change\", function FetchDataComponent_Template_select_change_3_listener() {\n        return ctx.loadVentas();\n      });\n      i0.ɵɵtemplate(4, FetchDataComponent_option_4_Template, 2, 2, \"option\", 2);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"h2\", 0);\n      i0.ɵɵtext(6, \"Ventas por persona\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"table\", 3)(8, \"thead\")(9, \"tr\")(10, \"th\");\n      i0.ɵɵtext(11, \"Id orden venta\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"th\");\n      i0.ɵɵtext(13, \"Cedula\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"th\");\n      i0.ɵɵtext(15, \"IdSupermercado\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"th\");\n      i0.ɵɵtext(17, \"MetodoPago\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"th\");\n      i0.ɵɵtext(19, \"TipoCambio\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"th\");\n      i0.ɵɵtext(21, \"FechaOrden\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(22, \"tbody\");\n      i0.ɵɵtemplate(23, FetchDataComponent_tr_23_Template, 13, 6, \"tr\", 4);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(24, \"label\", 5);\n      i0.ɵɵtext(25);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.selectedPerson);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.persons);\n      i0.ɵɵadvance(19);\n      i0.ɵɵproperty(\"ngForOf\", ctx.ventas);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"TOTAL DE VENTAS(COLONES): \", ctx.totalVentas, \"\");\n    }\n  },\n  dependencies: [i2.NgForOf, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgModel],\n  styles: [\".container[_ngcontent-%COMP%] {\\r\\n  margin: 20px;\\r\\n  padding: 10px;\\r\\n  background-color: #f0f0f0;\\r\\n}\\r\\n\\r\\n.title[_ngcontent-%COMP%] {\\r\\n  text-align: center;\\r\\n  font-size: 24px;\\r\\n  color: #333;\\r\\n}\\r\\n\\r\\n.person-select[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  margin-bottom: 10px;\\r\\n}\\r\\n\\r\\n.person-select__icon[_ngcontent-%COMP%] {\\r\\n  width: 20px;\\r\\n  height: 20px;\\r\\n  margin-right: 10px;\\r\\n}\\r\\n\\r\\n.person-select__name[_ngcontent-%COMP%] {\\r\\n  font-weight: bold;\\r\\n}\\r\\n\\r\\n.table[_ngcontent-%COMP%] {\\r\\n  width: 100%;\\r\\n  border-collapse: collapse;\\r\\n}\\r\\n\\r\\n  .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\r\\n    padding: 8px;\\r\\n    border: 1px solid #ccc;\\r\\n  }\\r\\n\\r\\n.total-label[_ngcontent-%COMP%] {\\r\\n  font-weight: bold;\\r\\n}\\r\\n\\r\\n.total-value[_ngcontent-%COMP%] {\\r\\n  color: #ff0000;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmV0Y2gtZGF0YS9mZXRjaC1kYXRhLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsa0RBQWtEOztBQUVsRDtFQUNFLFlBQVk7RUFDWixhQUFhO0VBQ2IseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLGVBQWU7RUFDZixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxZQUFZO0VBQ1osa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsV0FBVztFQUNYLHlCQUF5QjtBQUMzQjs7RUFFRTs7SUFFRSxZQUFZO0lBQ1osc0JBQXNCO0VBQ3hCOztBQUVGO0VBQ0UsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsY0FBYztBQUNoQiIsInNvdXJjZXNDb250ZW50IjpbIi8qIEVzdGlsb3MgcGFyYSBlbCBjb21wb25lbnRlIEZldGNoRGF0YUNvbXBvbmVudCAqL1xyXG5cclxuLmNvbnRhaW5lciB7XHJcbiAgbWFyZ2luOiAyMHB4O1xyXG4gIHBhZGRpbmc6IDEwcHg7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2YwZjBmMDtcclxufVxyXG5cclxuLnRpdGxlIHtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgZm9udC1zaXplOiAyNHB4O1xyXG4gIGNvbG9yOiAjMzMzO1xyXG59XHJcblxyXG4ucGVyc29uLXNlbGVjdCB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XHJcbn1cclxuXHJcbi5wZXJzb24tc2VsZWN0X19pY29uIHtcclxuICB3aWR0aDogMjBweDtcclxuICBoZWlnaHQ6IDIwcHg7XHJcbiAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xyXG59XHJcblxyXG4ucGVyc29uLXNlbGVjdF9fbmFtZSB7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuXHJcbi50YWJsZSB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcclxufVxyXG5cclxuICAudGFibGUgdGgsXHJcbiAgLnRhYmxlIHRkIHtcclxuICAgIHBhZGRpbmc6IDhweDtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgfVxyXG5cclxuLnRvdGFsLWxhYmVsIHtcclxuICBmb250LXdlaWdodDogYm9sZDtcclxufVxyXG5cclxuLnRvdGFsLXZhbHVlIHtcclxuICBjb2xvcjogI2ZmMDAwMDtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","FetchDataComponent","constructor","http","ngOnInit","get","subscribe","data","persons","loadVentas","totalVentas","selectedPerson","ventas","ventasIds","map","venta","id","console","log","detalleVenta","reduce","total","precioTotalImpuestos","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\heine\\OneDrive\\Escritorio\\Web_Ventas\\Web_Ventas\\WebVistas\\ClientApp\\src\\app\\fetch-data\\fetch-data.component.html","C:\\Users\\heine\\OneDrive\\Escritorio\\Web_Ventas\\Web_Ventas\\WebVistas\\ClientApp\\src\\app\\fetch-data\\fetch-data.component.ts"],"sourcesContent":["<h1 style=\"text-align: center;\">TOTAL DE VENTAS POR CLIENTE</h1>\r\n\r\n<div style=\"text-align: center;\">\r\n  <select placeholder=\"Seleccionar persona\" [(ngModel)]=\"selectedPerson\" (change)=\"loadVentas()\">\r\n    <option *ngFor=\"let person of persons\" [value]=\"person.cedula\">{{ person.nombre }}</option>\r\n  </select>\r\n</div>\r\n\r\n\r\n<h2 style=\"text-align: center;\">Ventas por persona</h2>\r\n\r\n<table class='table table-striped' aria-labelledby=\"tableLabel\">\r\n  <thead>\r\n    <tr>\r\n      <th>Id orden venta</th>\r\n      <th>Cedula</th>\r\n      <th>IdSupermercado</th>\r\n      <th>MetodoPago</th>\r\n      <th>TipoCambio</th>\r\n      <th>FechaOrden</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr *ngFor=\"let venta of ventas\">\r\n      <td>{{ venta.id }}</td>\r\n      <td>{{ venta.cedula }}</td>\r\n      <td>{{ venta.idSupermercado }}</td>\r\n      <td>{{ venta.metodoPago }}</td>\r\n      <td>{{ venta.tipoCambio }}</td>\r\n      <td>{{ venta.fechaOrden }}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<label style=\"text-align: left;\">TOTAL DE VENTAS(COLONES): {{ totalVentas }}</label>\r\n\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\n@Component({\r\n  selector: 'app-fetch-data',\r\n  templateUrl: './fetch-data.component.html',\r\n  styleUrls: ['./fetch-data.component.css']\r\n})\r\nexport class FetchDataComponent implements OnInit {\r\n\r\n  selectedPerson: number = 0;\r\n  persons: any[] = [];\r\n  ventas: any[] = [];\r\n  totalVentas: number = 0;\r\n  detalleVenta: any[] = [];\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  ngOnInit() {\r\n    // Obtener los datos de las personas desde una URL\r\n    this.http.get<any[]>('https://localhost:5001/api/Personas/ObtenerPersonas').subscribe(data => {\r\n      this.persons = data;\r\n      this.loadVentas();\r\n    });\r\n  }\r\n\r\n  // Método para cargar las ventas al seleccionar una persona\r\n  loadVentas() {\r\n    this.totalVentas = 0;\r\n    // Obtener los datos de las ventas desde una URL utilizando this.selectedPerson como parámetro\r\n    this.http.get<any[]>('https://localhost:5001/api/Ventas/ObtenerOrdenVenta/' + this.selectedPerson).subscribe(data => {\r\n      this.ventas = data;\r\n      // Obtener los detalles de venta para cada venta en this.ventas\r\n      const ventasIds = this.ventas.map(venta => venta.id);\r\n      console.log(ventasIds);\r\n      this.http.get<any[]>('https://localhost:5001/api/Ventas/ObtenerDetallesOrdenVenta/' + ventasIds).subscribe(data => {\r\n        this.detalleVenta = data;\r\n\r\n        // Calcular el total de ventas\r\n        this.totalVentas = this.detalleVenta.reduce((total, venta) => total + venta.precioTotalImpuestos, 0);\r\n      });\r\n    });\r\n    \r\n  }\r\n\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}